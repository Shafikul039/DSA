#include<bits/stdc++.h>
using namespace std;
#define ll   long long
#define pb   push_back
#define yes   cout<<"YES"<<endl
#define no   cout<<"NO"<<endl
#define all(x) (x).begin(), (x).end()
#define    gcd(a,b)      __gcd(a,b)
#define    lcm(a,b)  (a*b)/__gcd(a,b)
#define optimize() ios_base::sync_with_stdio(false);cin.tie(nullptr);
const ll N=1e5+7,INF=1e18;
ll mod=1e9+7;
vector<pair<ll,ll>>g[N];
ll vis[N],parent[N];
ll dis[N];

void bfs(ll source){
    priority_queue<tuple<ll,ll,ll>,vector<tuple<ll,ll,ll>>, greater<tuple<ll,ll,ll>>>q;
    q.push({0,source,-1});

    while(!q.empty()){
        tuple<ll,ll,ll>ver=q.top();
        q.pop();

        ll cur_v=get<1>(ver);
        ll cur_wt=get<0>(ver);
        ll p=get<2>(ver);

        if(vis[cur_v])continue;
        dis[cur_v]=cur_wt;
        parent[cur_v]=p;
        vis[cur_v]=1;

        for(auto child:g[cur_v]){
            ll cur_c=child.first;
            ll wt=child.second;
            if(!vis[cur_c]){
                q.push({cur_wt+wt,cur_c,cur_v});
            }
        }
    }
}

int main(){
    optimize()
    ll n,m;cin>>n>>m;
    for(int i=0;i<m;i++){
        ll x,y,w;
        cin>>x>>y>>w;
        g[x].pb({y,w});
        g[y].pb({x,w});
    }
    bfs(1);
    
    if(!vis[n]){
        cout<<-1<<endl;
        return 0;
    }

    cout<<dis[n]<<endl;
    ll p=parent[n];
    vector<ll>ans;
    ans.pb(n);
    while(p!=-1){
        ans.pb(p);
        p=parent[p];
    }
    reverse(all(ans));
    for(auto &u:ans)cout<<u<<" ";cout<<endl;
}
